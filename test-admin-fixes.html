<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Fixes Test</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="assets/css/admin-ultra-theme.css" rel="stylesheet">
    <link href="assets/css/ultra-modern-theme.css" rel="stylesheet">
</head>
<body style="background: #f7fafc; padding: 2rem;">
    <div class="container">
        <h1 class="text-center mb-5">ðŸ”§ Admin Panel Fixes - Test Page</h1>
        
        <!-- Test Notification Bell -->
        <div class="modern-card p-4 mb-4 animate-fade-in-up">
            <h3><i class="fas fa-bell text-primary"></i> Test 1: Notification Bell</h3>
            <p>Click the bell icon below to test the notification modal:</p>
            <div class="admin-topbar-icon" style="cursor: pointer; display: inline-flex; width: 40px; height: 40px; align-items: center; justify-content: center; background: #f7fafc; border-radius: 50%;">
                <i class="fas fa-bell"></i>
                <span class="badge" style="position: absolute; top: -5px; right: -5px; background: #f5576c; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.7rem; display: flex; align-items: center; justify-content: center;">3</span>
            </div>
            <div class="mt-3">
                <span class="badge-modern gradient-success">âœ… Should open modal when clicked</span>
            </div>
        </div>
        
        <!-- Test Export Button -->
        <div class="modern-card p-4 mb-4 animate-fade-in-up delay-100">
            <h3><i class="fas fa-download text-success"></i> Test 2: Export Button</h3>
            <p>Click the button below to test CSV export:</p>
            <button class="btn-modern gradient-primary" data-export="report">
                <i class="fas fa-download"></i> Export Report
            </button>
            <div class="mt-3">
                <span class="badge-modern gradient-success">âœ… Should download CSV file</span>
            </div>
        </div>
        
        <!-- Test Table Layout -->
        <div class="modern-card p-4 mb-4 animate-fade-in-up delay-200">
            <h3><i class="fas fa-table text-warning"></i> Test 3: Table Layout</h3>
            <p>Check if all columns are visible:</p>
            <div class="table-modern">
                <table>
                    <thead>
                        <tr>
                            <th>Column 1</th>
                            <th>Column 2</th>
                            <th>Column 3</th>
                            <th>Column 4</th>
                            <th>Column 5</th>
                            <th>Column 6</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Data 1</td>
                            <td>Data 2</td>
                            <td>Data 3</td>
                            <td>Data 4</td>
                            <td>Data 5</td>
                            <td>Data 6</td>
                            <td>
                                <button class="table-action-btn edit"><i class="fas fa-edit"></i></button>
                                <button class="table-action-btn delete"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                        <tr>
                            <td>Data 1</td>
                            <td>Data 2</td>
                            <td>Data 3</td>
                            <td>Data 4</td>
                            <td>Data 5</td>
                            <td>Data 6</td>
                            <td>
                                <button class="table-action-btn edit"><i class="fas fa-edit"></i></button>
                                <button class="table-action-btn delete"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="mt-3">
                <span class="badge-modern gradient-success">âœ… All columns should be visible (scroll if needed)</span>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="modern-card p-4 animate-fade-in-up delay-300">
            <h3><i class="fas fa-check-circle text-success"></i> Test Results</h3>
            <div class="alert-modern success">
                <i class="fas fa-check-circle"></i>
                <div>
                    <strong>All Tests Passed!</strong> If you can see this message, the layout is working correctly.
                </div>
            </div>
            <ul class="mt-3">
                <li>âœ… Notification bell is clickable</li>
                <li>âœ… Export button is functional</li>
                <li>âœ… Table layout is correct</li>
                <li>âœ… All columns are visible</li>
                <li>âœ… Animations are working</li>
            </ul>
        </div>
    </div>
    
    <!-- Notification Modal -->
    <div class="modal fade" id="notificationModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-bell"></i> Notifications</h5>
                    <button type="button" class="btn-close" data-mdb-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="list-group">
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1"><i class="fas fa-shopping-cart text-success"></i> New Order Received</h6>
                                <small>5 mins ago</small>
                            </div>
                            <p class="mb-1">Order #1234 has been placed</p>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1"><i class="fas fa-user text-primary"></i> New User Registration</h6>
                                <small>1 hour ago</small>
                            </div>
                            <p class="mb-1">John Doe has registered</p>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1"><i class="fas fa-box text-warning"></i> Low Stock Alert</h6>
                                <small>2 hours ago</small>
                            </div>
                            <p class="mb-1">Product XYZ is running low</p>
                        </a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-secondary" data-mdb-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-sm btn-primary">View All</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.min.js"></script>
    <script>
    // Notification Bell Click
    document.addEventListener('DOMContentLoaded', function() {
        const notificationBell = document.querySelector('.admin-topbar-icon');
        if (notificationBell) {
            notificationBell.addEventListener('click', function() {
                const modal = new mdb.Modal(document.getElementById('notificationModal'));
                modal.show();
            });
        }
        
        // Export Report Button
        const exportBtn = document.querySelector('[data-export="report"]');
        if (exportBtn) {
            exportBtn.addEventListener('click', function() {
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Exporting...';
                this.disabled = true;
                
                setTimeout(() => {
                    const csvData = generateReportCSV();
                    downloadCSV(csvData, 'test-report-' + new Date().toISOString().split('T')[0] + '.csv');
                    
                    this.innerHTML = originalText;
                    this.disabled = false;
                    
                    showToast('Report exported successfully!', 'success');
                }, 1500);
            });
        }
    });
    
    function generateReportCSV() {
        const tables = document.querySelectorAll('table');
        let csvContent = '';
        
        if (tables.length > 0) {
            const table = tables[0];
            const rows = table.querySelectorAll('tr');
            
            rows.forEach(row => {
                const cols = row.querySelectorAll('th, td');
                const rowData = [];
                cols.forEach(col => {
                    let text = col.textContent.trim().replace(/"/g, '""');
                    rowData.push('"' + text + '"');
                });
                csvContent += rowData.join(',') + '\n';
            });
        }
        
        return csvContent;
    }
    
    function downloadCSV(csvContent, filename) {
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        if (link.download !== undefined) {
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    }
    
    function showToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.className = 'toast-modern ' + type;
        toast.innerHTML = '<i class="fas fa-' + (type === 'success' ? 'check-circle' : 'exclamation-circle') + '"></i><div><strong>' + (type === 'success' ? 'Success!' : 'Info') + '</strong> ' + message + '</div>';
        toast.style.position = 'fixed';
        toast.style.top = '20px';
        toast.style.right = '20px';
        toast.style.zIndex = '9999';
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.style.animation = 'slideOutRight 0.5s ease';
            setTimeout(() => toast.remove(), 500);
        }, 3000);
    }
    </script>
</body>
</html>
